update_config:
  alias: 'Update & Restart'
  sequence:
    - service: shell_command.get_latest_config
    - delay: 00:00:05
    - service: homeassistant.restart
test1:
  alias: 'Music Night'
  sequence:
    - service: media_player.volume_set
      data:
        entity_id: media_player.kitchen
        volume_level: .4
    - service: tts.google_say
      entity_id: media_player.kitchen
      data:
        message: 'Test completed'

night_music:
  alias: 'Music Night'
  sequence:
    - service: media_player.volume_set
      data:
        entity_id: media_player.kitchen
        volume_level: .4
    - service: tts.amazon_polly_say
      data_template:
        entity_id: media_player.kitchen
        message: '<speak>Goodnight guys, I will play some music for a little</speak>'
    - delay: 00:00:03
    - service: media_player.select_source
      data:
        entity_id: media_player.kitchen
        source: 'Migos'
    - service: media_player.volume_set
      data:
        entity_id: media_player.kitchen
        volume_level: .15
    - delay: 01:00:00
    - service: media_player.media_pause
      data:
        entity_id: media_player.kitchen

say:
  alias: Sonos TTS
  sequence:
    - service: media_player.sonos_snapshot
      data_template:
        with_group: yes
    - delay: '00:00:03'
    - service: media_player.sonos_unjoin
      data_template:
        entity_id: "{{ where }}"
    - delay: '00:00:01'
    - service: media_player.sonos_join
      data_template:
        master: "{{ master }}"
        entity_id: "{{ where }}"
    - delay: '00:00:01'
    - service: media_player.volume_set
      data_template:
        entity_id: "{{ where }}"
        volume_level: "{{ volume }}"
    - delay: '00:00:02'
    - service: media_player.play_media
      data:
        entity_id:
          - media_player.kitchen
        media_content_id: http://REDACTED33:8123/local/sounds/two-tone-chime.mp3
        media_content_type: music
    - delay: '00:00:02'
    - service: tts.google_say
      data_template:
        entity_id: "{{ master }}"
        message: "{{ what }}"
    - delay: '00:00:25'
    - service: media_player.sonos_restore
      data_template:
        with_group: yes
